\documentclass{article}

\usepackage{siunitx}
\usepackage{tikz} % To generate the plot from csv
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{filecontents}

\usepgfplotslibrary{units} % Allows to enter the units nicely
\pgfplotstableread[col sep=comma]{\csvFile}\datatable
\pgfplotsset{compat=1.9}
\makeatletter
\pgfplotsset{
    /pgfplots/flexible xticklabels from table/.code n args={3}{%
        \pgfplotstableread[#3]{#1}\coordinate@table
        \pgfplotstablegetcolumn{#2}\of{\coordinate@table}\to\pgfplots@xticklabels
        \let\pgfplots@xticklabel=\pgfplots@user@ticklabel@list@x
    }
}
\makeatother
\begin{document}

\begin{tikzpicture}
\begin{axis}[
ybar, ymin=0,
width=\linewidth, % Scale the plot to \linewidth
xlabel=Graph,
ylabel=Time,
y unit=\si{\second},
y SI prefix=milli,
flexible xticklabels from table={\csvFile}{category}{col sep=comma},
%xticklabel style={text height=1.5ex}, % To make sure the text labels are nicely aligned
xtick=data,
nodes near coords,
nodes near coords align={vertical}]
\pgfplotstablegetcolsof{\datatable}
\pgfmathparse{\pgfplotsretval-1}
\foreach \yindex in {1,...,\pgfmathresult}
	\addplot table[x expr=\coordindex,y index =\yindex]{\datatable};

\end{axis}

\end{tikzpicture}
\end{document}
